<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Streamify - Home</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-black text-white">
<!-- Navbar -->
<nav class="bg-gray-900 px-4 py-3 shadow-md">
  <div class="container mx-auto flex items-center justify-between">
    <a href="index.html" class="text-2xl font-bold text-red-500">Streamify</a>
    <div class="hidden md:flex items-center space-x-10">
   
      <!-- Home -->
      <div class="nav-item">
        <a href="index.html" class="flex items-center">
          <i class="fas fa-home mr-1"></i>
          <span class="nav-text">Home</span>
        </a>
      </div>
      <!-- Favorites -->
      <div class="nav-item">
        <a href="favorites.html" class="flex items-center">
          <i class="fas fa-heart mr-1"></i>
          <span class="nav-text">Favorites</span>
        </a>
      </div>
      <!-- Contact -->
      <div class="nav-item">
        <a href="contact.html" class="flex items-center">
          <i class="fas fa-envelope mr-1"></i>
          <span class="nav-text">Contact</span>
        </a>
      </div>
      <!-- Game -->
      <div class="nav-item">
        <a href="game.html" class="flex items-center">
          <i class="fas fa-gamepad mr-1"></i>
          <span class="nav-text">Play Game</span>
        </a>
      </div>
      <button id="logout-btn" class="hidden bg-red-500 text-white px-4 py-2 rounded">Logout</button>
    </div>
    <!-- Search Box and Icons -->
    <div class="flex items-center space-x-4">
      <div class="hidden md:block">
        <input type="text" id="search-box" placeholder="Search movies..." 
               class="px-3 py-2 rounded-md bg-gray-800 text-white focus:outline-none w-full" />
        <ul id="suggestions-list" class="absolute bg-gray-900 text-white rounded-md w-full shadow-md hidden"></ul>
      </div>
      <!-- Search Icon (Mobile only) -->
      <button id="mobile-search-toggle" class="md:hidden text-white focus:outline-none">
        <i class="fas fa-search"></i>
      </button>
      <!-- Mobile Menu Toggle -->
      <div class="md:hidden">
        <button id="menu-toggle" class="text-white focus:outline-none">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-5" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>
  </div>
  <!-- Mobile Search Box (Hidden by default) -->
  <div id="mobile-search-box" class="hidden px-4 py-2 bg-gray-800 md:hidden">
    <input type="text" placeholder="Search movies..." 
           class="w-full px-3 py-2 rounded-md bg-gray-700 text-white focus:outline-none" />
    <ul id="mobile-suggestions-list" class="absolute bg-gray-900 text-white rounded-md w-full shadow-md hidden"></ul>
  </div>
  <!-- Mobile Navigation Menu -->
  <div id="mobile-menu" class="md:hidden hidden px-4 pt-2 pb-4 bg-gray-800">
    <a href="index.html" class="block py-2 hover:text-red-500 transition flex items-center">
      <i class="fas fa-home mr-3"></i> Home
    </a>
    <a href="favorites.html" class="block py-2 hover:text-red-500 transition flex items-center">
      <i class="fas fa-heart mr-3"></i> Favorites
    </a>
    <a href="contact.html" class="block py-2 hover:text-red-500 transition flex items-center">
      <i class="fas fa-envelope mr-3"></i> Contact
    </a>
    <a href="game.html" class="block py-2 hover:text-red-500 transition flex items-center">
      <i class="fas fa-gamepad mr-3"></i> Play Game
    </a>
    <button onclick="logout()" class="block w-full text-left py-2 hover:text-red-500 transition flex items-center">
      <i class="fas fa-sign-out-alt mr-3"></i> Logout
    </button>
  </div>
</nav>

  <!-- Hero Section -->
  <section id="hero" class="relative hero">
    <div class="hero-overlay flex items-center justify-center">
      <div class="container mx-auto px-4 ml-8">
        <h1 class="text-5xl font-extrabold text-red-500 mb-4">Welcome to Streamify</h1>
        <p class="text-xl text-gray-300 mb-8">
          Discover your next favorite movie, explore trending films, and enjoy endless cinematic adventures.
        </p>
        <a href="#movies" class="hover: bg-gradient-to-r from-red-500 to-orange-400 text-white py-3 px-8 rounded-full text-xl font-semibold transition">
          Explore Now
        </a>
      </div>
    </div>
  </section>
 
  <!-- Main Content -->
  <main id="movies" class="container mx-auto p-4">
    <section>
      <h2 class="text-2xl font-bold text-red-500 mb-4">ðŸ“ˆ Trending Now</h2>
      <div class="trending-container">
        <div id="trending-list" class="trending-list"></div>
      </div>
    </section>

    <!-- Genre Selection -->
    <section class="mt-6">
      <div id="tags" class="flex flex-wrap gap-2"></div> 
    </section>

    <!-- Popular Movies Section -->
    <section class="mt-8">
      <h2 id="movie-title" class="text-2xl font-bold text-red-500 mb-4">ðŸ”¥ Popular Movies</h2>
      <div class="movie-section">
        <div id="movie-list" class="movie-list"></div>
      </div>
    </section>
  </main>
  
<!-- Footer -->
<footer class="bg-gray-900 text-white py-6 mt-10 text-center flex items-center">
  <div class="container mx-auto">
      <p class="text-gray-400">&copy; 2025 Streamify. All rights reserved.</p>
  </div>
   <button id="scrollToTop" class="fixed bottom-2 right-8 bg-red-600 text-white p-2 px-4 rounded-md shadow-md hidden hover:bg-red-500 transition">
    <i class="fas fa-arrow-up"></i>
</button>
</footer>

<script type="module">
document.addEventListener("DOMContentLoaded", function () {
    const menuToggle = document.getElementById("menu-toggle");
    const mobileMenu = document.getElementById("mobile-menu");
    const searchToggle = document.getElementById("mobile-search-toggle");
    const mobileSearchBox = document.getElementById("mobile-search-box");
    const desktopSearchInput = document.getElementById("search-box");
    const mobileSearchInput = document.querySelector("#mobile-search-box input");
    const scrollToTopBtn = document.getElementById("scrollToTop");

    const searchSuggestionBox = document.createElement("div");
    searchSuggestionBox.classList.add("search-suggestions", "absolute", "bg-gray-800", "text-white", "w-full", "rounded-md", "shadow-lg", "z-50", "hidden");
    searchSuggestionBox.style.maxHeight = "200px"; 
    searchSuggestionBox.style.overflowY = "auto"; 
    document.body.appendChild(searchSuggestionBox);

    // Mobile menu toggle
    if (menuToggle && mobileMenu) {
        menuToggle.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
            mobileSearchBox.classList.add("hidden");
        });
    }

    // Mobile search toggle
    if (searchToggle && mobileSearchBox) {
        searchToggle.addEventListener("click", () => {
            mobileSearchBox.classList.toggle("hidden");
            mobileMenu.classList.add("hidden");
            if (!mobileSearchBox.classList.contains("hidden")) {
                mobileSearchInput.focus();
            }
        });
    }
    // Fetch movie suggestions from TMDB API
    async function fetchMovieSuggestions(query, inputField) {
        if (query.length < 2) {
            searchSuggestionBox.classList.add("hidden"); 
            return;
        }
        const API_KEY = "a1f92cfb27aa3b9e66cb42880700f6d9"; 
        const response = await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${query}`);
        const data = await response.json();
        displaySuggestions(data.results, inputField);
    }

    // Display suggestions in dropdown
    function displaySuggestions(movies, inputField) {
        searchSuggestionBox.innerHTML = ""; 
        if (!movies || movies.length === 0) {
            searchSuggestionBox.classList.add("hidden");
            return;
        }

        movies.slice(0, 5).forEach(movie => {
            const suggestionItem = document.createElement("div");
            suggestionItem.classList.add("p-2", "hover:bg-gray-700", "cursor-pointer");
            suggestionItem.textContent = movie.title;
            suggestionItem.addEventListener("click", () => {
                inputField.value = movie.title; 
                handleSearch(movie.title);
                searchSuggestionBox.classList.add("hidden");
            });

            searchSuggestionBox.appendChild(suggestionItem);
        });

        searchSuggestionBox.classList.remove("hidden");
        const { left, top, width } = inputField.getBoundingClientRect();
        searchSuggestionBox.style.left = `${left}px`;
        searchSuggestionBox.style.top = `${top + inputField.offsetHeight}px`;
        searchSuggestionBox.style.width = `${width}px`;
    }

    // Event listeners for search input
    [desktopSearchInput, mobileSearchInput].forEach(input => {
        if (input) {
            input.addEventListener("input", () => fetchMovieSuggestions(input.value, input));
            input.addEventListener("focus", () => fetchMovieSuggestions(input.value, input));
        }
    });

    // Search function
    function handleSearch(query) {
        if (query.trim().length > 0) {
            localStorage.setItem("searchQuery", query.trim());
            window.location.href = "search-results.html";
        }
    }

    // Search on Enter key
    [desktopSearchInput, mobileSearchInput].forEach(input => {
        if (input) {
            input.addEventListener("keypress", (e) => {
                if (e.key === "Enter") {
                    handleSearch(input.value);
                }
            });
        }
    });

    // Hide suggestions when clicking outside
    document.addEventListener("click", (e) => {
        if (!desktopSearchInput.contains(e.target) && 
            !mobileSearchInput.contains(e.target) &&
            !searchSuggestionBox.contains(e.target)) {
            searchSuggestionBox.classList.add("hidden");
        }
    });

    // âœ… FIXED SCROLL TO TOP FUNCTIONALITY
    if (scrollToTopBtn) {
        window.addEventListener("scroll", () => {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.classList.remove("hidden"); 
            } else {
                scrollToTopBtn.classList.add("hidden"); 
            }
        });

        scrollToTopBtn.addEventListener("click", () => {
            window.scrollTo({ top: 0, behavior: "smooth" });
        });
    }
});
import { auth, onAuthStateChanged, signOut } from "./firebase.js";
    const logoutBtn = document.getElementById("logout-btn");
    onAuthStateChanged(auth, (user) => {
        if (user) {
            logoutBtn.classList.remove("hidden"); 
        } else {
            logoutBtn.classList.add("hidden"); 
        }
    });

    // Logout function
    logoutBtn.addEventListener("click", async () => {
        await signOut(auth);
        window.location.href = "index.html"; 
    });
</script>
<script src="./firebase.js" type="module"></script>
<script type="module">
  import { checkAuthStatus, setupLogoutButton } from "./auth/auth.js";
  checkAuthStatus(); 
  setupLogoutButton(); 
</script>
<script src="script.js" type="module"></script>
</body>
</html>
